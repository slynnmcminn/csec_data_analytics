from openai import OpenAI
import os

# Set the OpenAI API key
client = OpenAI(
  api_key=os.getenv('OPENAI_API_KEY', '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')
)

# Load your vulnerability descriptions from the text file
with open(r"C:\Users\slynn\Downloads\vulnerability_descriptions.txt", 'r') as file:
    descriptions = file.readlines()

# Initialize an empty list to store the extracted information
extracted_information = []

# Loop through each vulnerability description
for description in descriptions:
    # Construct the prompt
    prompt = f"Please extract the CVSS scores from the following NVD vulnerability description:\n\n{description}"

    # Call the GPT-4 model
    response = client.completions.create(
        model="gpt-3.5-turbo",  # Use the model you have access to
        prompt=prompt,
        max_tokens=50
    )

    # Extract the model's response
    extracted_feature = response.choices[0].text.strip()

    # Append the extracted information to the list
    extracted_information.append(extracted_feature)

# Print or store the extracted information as needed
for info in extracted_information:
    print(info)
